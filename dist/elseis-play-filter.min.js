!function () {
    'use strict';
    angular.module('elseis.playFilter', ["dvm.templates","restangular"]);
}(), function () {
    'use strict';
    function e(e, t) {
        function l() {
            if (r.play.miniatura) {
                var e = r.play.miniatura;
                r.play.miniatura = e.slice(0, e.length - 4) + '-630x370' + e.slice(e.length - 4, e.length);
            }
        }
        var r = this;
        r.$onInit = function () {
        }, r.$onChanges = function (e) {
            l(), jQuery('.play').each(function (e, t) {
                window.setTimeout(function () {
                    jQuery(t).addClass('animated fadeIn');
                }, 100 * e);
            });
        }, r.redirectToPlay = function () {
            e.location.href = r.play.link;
        };
    }
    e.$inject = ["$window","$scope"], angular.module('elseis.playFilter').component('elseisPlay', {
        bindings: { play: '<' },
        controller: e,
        controllerAs: 'elseisPlayCtrl',
        templateUrl: 'src/scripts/elseisPlay/elseisPlay.tpl.html'
    });
}(), function () {
    'use strict';
    function e(e, t, l) {
        function r() {
            g.loading = !0, g.totalPages = 0, a();
            var t;
            t = e.all(g.currentSearchfilter), t.getList().then(function (e) {
                g.plays = e.data, n(e), l(function () {
                    g.loading = !1;
                }, 500);
            });
        }
        function n(e) {
            g.totalPages = parseInt(e.headers()['x-wp-totalpages']), g.totalPlays = parseInt(e.headers()['x-wp-total']);
        }
        function i() {
            g.allPages = !0, g.loadAllPlays();
        }
        function a() {
            g.currentSearchfilter = 'obras-api/?', '' != g.filter && (g.currentSearchfilter = g.currentSearchfilter + '&' + g.filter), '' != g.taxonomy && (g.currentSearchfilter = g.currentSearchfilter + '&filter[taxonomy]=' + g.taxonomy), '' != g.term && (g.currentSearchfilter = g.currentSearchfilter + '&filter[term]=' + g.term), '' != g.kw && (g.currentSearchfilter = g.currentSearchfilter + '&filter[kw]=' + g.kw), g.allPages ? g.currentSearchfilter = g.currentSearchfilter + '&filter[posts_per_page]=-1&filter[paged]=1' : g.currentSearchfilter = g.currentSearchfilter + '&filter[posts_per_page]=4&filter[paged]=1';
        }
        function o() {
            (g.kwInput.length > 3 || 0 == g.kwInput.length) && g.kwInput != g.kw && (g.kw = g.kwInput, w(g.loadAllPlays, 500));
        }
        function s(e) {
            g.selectedLetter = e, d(), c(e);
        }
        function c(e) {
            g.authors && (g.displayedAuthors = g.authors.filter(function (t) {
                var l = t.name.slice(0, 1).toUpperCase();
                return l == e.toUpperCase();
            }));
        }
        function u() {
            var t = e.all('autor');
            t.getList().then(function (e) {
                g.authors = e.data;
            });
        }
        function f(e) {
            t.location.href = e.link;
        }
        function d() {
            g.selectedAuthor = '';
        }
        function p(e) {
            return g.selectedLetter == e;
        }
        function y() {
            g.dropdownVisible = !g.dropdownVisible;
        }
        function m(e) {
            g.selectedDropdownOption = e, g.toggleDropdown(), h(e);
        }
        function h() {
            'm\xE1s actuales' == g.selectedDropdownOption && (g.filter = 'filter[meta_compare]=%3C%3D&filter[meta_value]=20160708&filter[meta_key]=estreno&filter[order]=DESC&filter[orderby]=meta_value_num'), 'pr\xF3ximamente' == g.selectedDropdownOption && (g.filter = 'filter[meta_compare]=%3E&filter[meta_value]=20160708&filter[meta_key]=estreno&filter[order]=ASC&filter[orderby]=meta_value_num'), 'mejor valoradas' == g.selectedDropdownOption && (g.orderBy = 'likes', g.filter = 'filter[meta_key]=_touchsize_likes&filter[order]=DESC&filter[orderby]=meta_value_num'), 'm\xE1s visitas' == g.selectedDropdownOption && (g.orderBy = 'views', g.filter = 'filter[meta_key]=ts_article_views&filter[order]=DESC&filter[orderby]=meta_value_num'), g.loadAllPlays();
        }
        var g = this;
        g.handleClickOnLetter = s, g.letterIsSelected = p, g.toggleDropdown = y, g.selectDropdownOption = m, g.loadAllPlays = r, g.loadAllAuthors = u, g.handleAuthorSelection = f, g.loadPlaysFilteredByKW = o, g.loadWithoutPagination = i, g.$onInit = function () {
            h(), g.loadAllPlays(), g.loadAllAuthors();
        }, g.plays = [], g.allPages = !1, g.loading = !1, g.currentSearchfilter = 'obras-api/?', g.kwInput = '';
        var w = function () {
                var e = 0;
                return function (t, l) {
                    clearTimeout(e), e = setTimeout(t, l);
                };
            }();
        g.selectedLetter = '', g.abecedario = ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","침","o","p","q","r","s","t","u","v","w","x","y","z"], g.displayedAuthors = [], g.authors = [], g.selectedAuthor = '', g.dropdownVisible = !1, g.dropdownOptions = ["m치s actuales","m치s visitas","mejor valoradas","pr칩ximamente"], g.selectedDropdownOption = 'm\xE1s visitas';
    }
    e.$inject = ["Restangular","$window","$timeout"], angular.module('elseis.playFilter').component('elseisPlayFilter', {
        bindings: {
            taxonomy: '<',
            term: '<',
            kw: '<'
        },
        controller: e,
        controllerAs: 'elseisPlayFilterCtrl',
        templateUrl: 'src/scripts/elseisPlayFilter/elseisPlayFilter.tpl.html'
    });
}(), function () {
    'use strict';
    angular.module('elseis.playFilter').config(["RestangularProvider",function(e){e.setFullResponse(!0),e.setBaseUrl("http://alltheater.elseis.es/wp-json/wp/v2/")}]);
}(), function () {
    'use strict';
    function e() {
        function e(e) {
            e.orderBy && (r.orderBy = e.orderBy.currentValue);
        }
        function t() {
            r.localPlays.forEach(function (e) {
                e.likes = parseInt(e.likes);
            });
        }
        function l() {
            r.localPlays.forEach(function (e) {
                e.views = parseInt(e.views);
            });
        }
        var r = this;
        r.$onInit = function () {
        }, r.$onChanges = function (n) {
            r.localPlays = angular.copy(r.plays), t(), l(), e(n);
        }, r.localSelectedAuthor = void 0, r.localCategoryFilter = void 0;
    }
    angular.module('elseis.playFilter').component('elseisPlaysDisplay', {
        bindings: {
            plays: '<',
            orderBy: '<'
        },
        controller: e,
        controllerAs: 'elseisPlaysDisplayCtrl',
        templateUrl: 'src/scripts/elseisPlaysDisplay/elseisPlaysDisplay.tpl.html'
    });
}(), function () {
    'use strict';
    angular.module('elseis.playFilter').filter('masActuales', function () {
        return function (e) {
            return e.filter(function (e) {
            });
        };
    }).filter('mejorValoradas', ["$filter",function(e){return function(e){}}]);
}(), function () {
    'use strict';
    angular.module('elseis.playFilter').provider('elseisPlayFilterService', function () {
        function e(e) {
            var t = this;
            return t.getAllPlays = function () {
            }, t;
        }
        e.$inject = ["Restangular"], this.$get = e;
    });
}();