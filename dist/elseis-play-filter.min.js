!function () {
    'use strict';
    angular.module('elseis.playFilter', ["dvm.templates","restangular"]);
}(), function () {
    'use strict';
    angular.module('elseis.playFilter').config(["RestangularProvider",function(e){e.setFullResponse(!0),e.setBaseUrl("http://alltheater.elseis.es/wp-json/wp/v2/")}]);
}(), function () {
    'use strict';
    function e(e, t) {
        function l() {
            if (r.play.miniatura) {
                var e = r.play.miniatura;
                r.play.miniatura = e.slice(0, e.length - 4) + '-630x370' + e.slice(e.length - 4, e.length);
            }
        }
        var r = this;
        r.$onInit = function () {
        }, r.$onChanges = function (e) {
            l(), jQuery('.play').each(function (e, t) {
                window.setTimeout(function () {
                    jQuery(t).addClass('animated fadeIn');
                }, 100 * e);
            });
        }, r.redirectToPlay = function () {
            e.location.href = r.play.link;
        };
    }
    e.$inject = ["$window","$scope"], angular.module('elseis.playFilter').component('elseisPlay', {
        bindings: { play: '<' },
        controller: e,
        controllerAs: 'elseisPlayCtrl',
        templateUrl: 'src/scripts/elseisPlay/elseisPlay.tpl.html'
    });
}(), function () {
    'use strict';
    function e(e, t, l) {
        function r() {
            w.loading = !0, w.totalPages = 0, w.firstAllPages || (w.allPages = !1), a();
            var t;
            t = e.all(w.currentSearchfilter), t.getList().then(function (e) {
                w.plays = e.data, n(e), l(function () {
                    w.loading = !1;
                }, 500), w.firstAllPages = !1;
            });
        }
        function n(e) {
            w.totalPages = parseInt(e.headers()['x-wp-totalpages']), w.totalPlays = parseInt(e.headers()['x-wp-total']);
        }
        function i() {
            w.allPages = !0, w.firstAllPages = !0, w.loadAllPlays();
        }
        function a() {
            w.currentSearchfilter = 'obras-api/?', '' != w.filter && (w.currentSearchfilter = w.currentSearchfilter + '&' + w.filter), '' != w.taxonomy && (w.currentSearchfilter = w.currentSearchfilter + '&filter[taxonomy]=' + w.taxonomy), '' != w.term && (w.currentSearchfilter = w.currentSearchfilter + '&filter[term]=' + w.term), '' != w.kw && (w.currentSearchfilter = w.currentSearchfilter + '&filter[kw]=' + w.kw), w.allPages ? w.currentSearchfilter = w.currentSearchfilter + '&filter[posts_per_page]=-1&filter[paged]=1' : w.currentSearchfilter = w.currentSearchfilter + '&filter[posts_per_page]=8&filter[paged]=1';
        }
        function o() {
            (w.kwInput.length > 2 || 0 == w.kwInput.length) && w.kwInput != w.kw && (w.kw = w.kwInput, P(w.loadAllPlays, 500));
        }
        function s() {
            w.kw = '', w.kwInput = '', w.loadAllPlays();
        }
        function c(e) {
            w.selectedLetter = e, p(), u(e);
        }
        function u(e) {
            w.authors && (w.displayedAuthors = w.authors.filter(function (t) {
                var l = t.name.split(/\s+/), r = !1;
                return l.forEach(function (t) {
                    var l = t.slice(0, 1).toUpperCase();
                    l == e.toUpperCase() && (r = !0);
                }), r;
            }));
        }
        function f() {
            var t = e.all('autor');
            t.getList().then(function (e) {
                w.authors = e.data;
            });
        }
        function d(e) {
            t.location.href = e.link;
        }
        function p() {
            w.selectedAuthor = '';
        }
        function y(e) {
            return w.selectedLetter == e;
        }
        function m() {
            w.dropdownVisible = !w.dropdownVisible;
        }
        function h(e) {
            w.selectedDropdownOption = e, w.toggleDropdown(), g(e);
        }
        function g() {
            'm\xE1s actuales' == w.selectedDropdownOption && (w.filter = 'filter[meta_compare]=%3C%3D&filter[meta_value]=20160708&filter[meta_key]=estreno&filter[order]=DESC&filter[orderby]=meta_value_num'), 'pr\xF3ximamente' == w.selectedDropdownOption && (w.filter = 'filter[meta_compare]=%3E&filter[meta_value]=20160708&filter[meta_key]=estreno&filter[order]=ASC&filter[orderby]=meta_value_num'), 'mejor valoradas' == w.selectedDropdownOption && (w.orderBy = 'likes', w.filter = 'filter[meta_key]=_touchsize_likes&filter[order]=DESC&filter[orderby]=meta_value_num'), 'm\xE1s vistas' == w.selectedDropdownOption && (w.orderBy = 'views', w.filter = 'filter[meta_key]=ts_article_views&filter[order]=DESC&filter[orderby]=meta_value_num'), w.loadAllPlays();
        }
        var w = this;
        w.handleClickOnLetter = c, w.letterIsSelected = y, w.toggleDropdown = m, w.selectDropdownOption = h, w.loadAllPlays = r, w.loadAllAuthors = f, w.handleAuthorSelection = d, w.loadPlaysFilteredByKW = o, w.loadWithoutPagination = i, w.loadAllWithNoKW = s, w.$onInit = function () {
            g(), w.loadAllPlays(), w.loadAllAuthors();
        }, w.plays = [], w.allPages = !1, w.loading = !1, w.currentSearchfilter = 'obras-api/?', w.kwInput = '';
        var P = function () {
                var e = 0;
                return function (t, l) {
                    clearTimeout(e), e = setTimeout(t, l);
                };
            }();
        w.selectedLetter = '', w.abecedario = ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","침","o","p","q","r","s","t","u","v","w","x","y","z"], w.displayedAuthors = [], w.authors = [], w.selectedAuthor = '', w.dropdownVisible = !1, w.dropdownOptions = ["m치s actuales","m치s vistas","mejor valoradas","pr칩ximamente"], w.selectedDropdownOption = 'm\xE1s vistas';
    }
    e.$inject = ["Restangular","$window","$timeout"], angular.module('elseis.playFilter').component('elseisPlayFilter', {
        bindings: {
            taxonomy: '<',
            term: '<',
            kw: '<'
        },
        controller: e,
        controllerAs: 'elseisPlayFilterCtrl',
        templateUrl: 'src/scripts/elseisPlayFilter/elseisPlayFilter.tpl.html'
    });
}(), function () {
    'use strict';
    function e() {
        function e(e) {
            e.orderBy && (r.orderBy = e.orderBy.currentValue);
        }
        function t() {
            r.localPlays.forEach(function (e) {
                e.likes = parseInt(e.likes);
            });
        }
        function l() {
            r.localPlays.forEach(function (e) {
                e.views = parseInt(e.views);
            });
        }
        var r = this;
        r.$onInit = function () {
        }, r.$onChanges = function (n) {
            r.localPlays = angular.copy(r.plays), t(), l(), e(n);
        }, r.localSelectedAuthor = void 0, r.localCategoryFilter = void 0;
    }
    angular.module('elseis.playFilter').component('elseisPlaysDisplay', {
        bindings: {
            plays: '<',
            orderBy: '<'
        },
        controller: e,
        controllerAs: 'elseisPlaysDisplayCtrl',
        templateUrl: 'src/scripts/elseisPlaysDisplay/elseisPlaysDisplay.tpl.html'
    });
}(), function () {
    'use strict';
    angular.module('elseis.playFilter').filter('masActuales', function () {
        return function (e) {
            return e.filter(function (e) {
            });
        };
    }).filter('mejorValoradas', ["$filter",function(e){return function(e){}}]);
}(), function () {
    'use strict';
    angular.module('elseis.playFilter').provider('elseisPlayFilterService', function () {
        function e(e) {
            var t = this;
            return t.getAllPlays = function () {
            }, t;
        }
        e.$inject = ["Restangular"], this.$get = e;
    });
}();