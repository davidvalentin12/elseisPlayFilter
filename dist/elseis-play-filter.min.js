!function () {
    'use strict';
    angular.module('elseis.playFilter', ["dvm.templates","restangular"]);
}(), function () {
    'use strict';
    angular.module('elseis.playFilter').config(["RestangularProvider",function(e){e.setFullResponse(!0),e.setBaseUrl("http://alltheater.elseis.es/wp-json/wp/v2/")}]);
}(), function () {
    'use strict';
    function e(e, t) {
        function l() {
            var e = r.play.miniatura;
            r.play.miniatura = e.slice(0, e.length - 4) + '-630x370' + e.slice(e.length - 4, e.length);
        }
        var r = this;
        r.$onInit = function () {
        }, r.$onChanges = function (e) {
            l(), jQuery('.play').each(function (e, t) {
                window.setTimeout(function () {
                    jQuery(t).addClass('animated bounceInUp');
                }, 100 * e);
            });
        }, r.redirectToPlay = function () {
            e.location.href = r.play.link;
        };
    }
    e.$inject = ["$window","$scope"], angular.module('elseis.playFilter').component('elseisPlay', {
        bindings: { play: '<' },
        controller: e,
        controllerAs: 'elseisPlayCtrl',
        templateUrl: 'src/scripts/elseisPlay/elseisPlay.tpl.html'
    });
}(), function () {
    'use strict';
    function e(e, t, l) {
        function r() {
            m.totalPages = 0, a();
            var t;
            t = e.all(m.currentSearchfilter), t.getList().then(function (e) {
                m.plays.length != e.data.length && (m.plays = e.data), n(e);
            });
        }
        function n(e) {
            m.totalPages = parseInt(e.headers()['x-wp-totalpages']), m.totalPlays = parseInt(e.headers()['x-wp-total']);
        }
        function a() {
            m.currentSearchfilter = 'obras-api/?', '' != m.taxonomy && (m.currentSearchfilter = m.currentSearchfilter + '&filter[taxonomy]=' + m.taxonomy), '' != m.term && (m.currentSearchfilter = m.currentSearchfilter + '&filter[term]=' + m.term), '' != m.kw && (m.currentSearchfilter = m.currentSearchfilter + '&filter[kw]=' + m.kw), m.allPages ? m.currentSearchfilter = m.currentSearchfilter + '&filter[posts_per_page]=-1&filter[paged]=1' : m.currentSearchfilter = m.currentSearchfilter + '&filter[posts_per_page]=4&filter[paged]=1';
        }
        function o() {
            (m.kwInput.length > 3 || 0 == m.kwInput.length) && m.kwInput != m.kw && (m.kw = m.kwInput, P(m.loadAllPlays, 500));
        }
        function i() {
            m.allPages = !0, m.loadAllPlays();
        }
        function s(e) {
            m.selectedLetter = e, p(), c(e);
        }
        function c(e) {
            m.authors && (console.log(m.authors), m.displayedAuthors = m.authors.filter(function (t) {
                var l = t.name.slice(0, 1).toUpperCase();
                return l == e.toUpperCase();
            }));
        }
        function u() {
            var t = e.all('autor');
            t.getList().then(function (e) {
                m.authors = e.data;
            });
        }
        function f(e) {
            t.location.href = e.link;
        }
        function p() {
            m.selectedAuthor = '';
        }
        function d(e) {
            return m.selectedLetter == e;
        }
        function y() {
            m.dropdownVisible = !m.dropdownVisible;
        }
        function h(e) {
            m.selectedDropdownOption = e, m.toggleDropdown(), g(e);
        }
        function g(e) {
            'm\xE1s actuales' == e && (m.filter = 'antesDeHoyYHoy'), 'pr\xF3ximamente' == e && (m.filter = 'despuesDeHoy'), 'mejor valoradas' == e && (m.orderBy = 'likes', m.filter = 'todos'), 'm\xE1s visitas' == e && (m.orderBy = 'views', m.filter = 'todos');
        }
        var m = this;
        m.handleClickOnLetter = s, m.letterIsSelected = d, m.toggleDropdown = y, m.selectDropdownOption = h, m.loadAllPlays = r, m.loadAllAuthors = u, m.handleAuthorSelection = f, m.loadPlaysFilteredByKW = o, m.loadWithoutPagination = i, m.$onInit = function () {
            m.loadAllPlays(), m.loadAllAuthors();
        }, m.plays = [], m.allPages = !1, m.currentSearchfilter = 'obras-api/?', m.kwInput = '';
        var P = function () {
                var e = 0;
                return function (t, l) {
                    clearTimeout(e), e = setTimeout(t, l);
                };
            }();
        m.selectedLetter = '', m.abecedario = ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","침","o","p","q","r","s","t","u","v","w","x","y","z"], m.displayedAuthors = [], m.authors = [], m.selectedAuthor = '', m.dropdownVisible = !1, m.dropdownOptions = ["m치s actuales","m치s visitas","mejor valoradas","pr칩ximamente"], m.selectedDropdownOption = 'm\xE1s actuales';
    }
    e.$inject = ["Restangular","$window","$timeout"], angular.module('elseis.playFilter').component('elseisPlayFilter', {
        bindings: {
            taxonomy: '<',
            term: '<',
            kw: '<'
        },
        controller: e,
        controllerAs: 'elseisPlayFilterCtrl',
        templateUrl: 'src/scripts/elseisPlayFilter/elseisPlayFilter.tpl.html'
    });
}(), function () {
    'use strict';
    function e() {
        function e(e) {
            e.filter && (o.localCategoryFilter = e.filter.currentValue);
        }
        function t(e) {
            e.orderBy && (o.orderBy = e.orderBy.currentValue);
        }
        function l() {
            var e = new Date();
            'antesDeHoyYHoy' == o.localCategoryFilter && (o.localPlays = o.localPlays.filter(function (t) {
                return new Date(t.estreno) <= e;
            })), 'despuesDeHoy' == o.localCategoryFilter && (o.localPlays = o.localPlays.filter(function (t) {
                return new Date(t.estreno) > e;
            }));
        }
        function r() {
            o.localPlays.forEach(function (e) {
                e.likes = parseInt(e.likes);
            });
        }
        function n() {
            o.localPlays.forEach(function (e) {
                e.views = parseInt(e.views);
            });
        }
        function a() {
            o.localPlays.forEach(function (e) {
                var t = e.estreno;
                e.estreno = t.slice(0, 4) + '-' + t.slice(4, 6) + '-' + t.slice(6, 8);
            });
        }
        var o = this;
        o.$onInit = function () {
        }, o.$onChanges = function (i) {
            o.localPlays = angular.copy(o.plays), r(), n(), a(), t(i), e(i), void 0 != o.localCategoryFilter && l();
        }, o.localSelectedAuthor = void 0, o.localCategoryFilter = void 0;
    }
    angular.module('elseis.playFilter').component('elseisPlaysDisplay', {
        bindings: {
            plays: '<',
            orderBy: '<',
            filter: '<',
            authorFilter: '<',
            totalPages: '<',
            totalPlays: '<',
            loadWithoutPagination: '&'
        },
        controller: e,
        controllerAs: 'elseisPlaysDisplayCtrl',
        templateUrl: 'src/scripts/elseisPlaysDisplay/elseisPlaysDisplay.tpl.html'
    });
}(), function () {
    'use strict';
    angular.module('elseis.playFilter').filter('masActuales', function () {
        return function (e) {
            return e.filter(function (e) {
            });
        };
    }).filter('mejorValoradas', ["$filter",function(e){return function(e){}}]);
}(), function () {
    'use strict';
    angular.module('elseis.playFilter').provider('elseisPlayFilterService', function () {
        function e(e) {
            var t = this;
            return t.getAllPlays = function () {
            }, t;
        }
        e.$inject = ["Restangular"], this.$get = e;
    });
}();